@namespace ShortDash.Server.Components
@inherits DashboardGridButtonBase<ActionButtonParameters>

<div class="grid-icon rounded" @attributes=CellAttributes>
    <div class="grid-icon-content d-table-cell align-middle">
        @if (HasIcon())
        {
            <img src="/assets/@Cell.DashboardAction.Icon" alt="@Cell.DashboardAction.Title" class="rounded"/>
        }
        else
        {
            @Cell.DashboardAction.Title
        }
    </div>
</div>
<div class="grid-icon-caption">
    @Cell.DashboardAction.Title
</div>

@code {

    protected Dictionary<string, object> CellAttributes;

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        CellAttributes = new Dictionary<string, object>();
        if (Cell.DashboardAction.BackgroundColor != null)
            CellAttributes.Add("style", "background-color: " + Cell.DashboardAction.BackgroundColor?.ToHtmlString());
    }

    private bool HasIcon()
    {
        return !string.IsNullOrWhiteSpace(Cell.DashboardAction.Icon);
    }

}
